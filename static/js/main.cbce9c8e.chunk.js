(this["webpackJsonpgithub-friends"]=this["webpackJsonpgithub-friends"]||[]).push([[0],{207:function(e,n,t){e.exports={container:"Graph_container__2Kff7"}},218:function(e,n,t){},23:function(e,n,t){e.exports={context:"App_context__10UXM",line:"App_line__3xSd4",hoverLine:"App_hoverLine__15sIW",hoverIcon:"App_hoverIcon__1t0bc",button:"App_button__13pio",link:"App_link__TB6Cl",tip:"App_tip__BO_Ie",description:"App_description__1hmAY"}},235:function(e,n){},237:function(e,n){},246:function(e,n){},248:function(e,n){},273:function(e,n){},274:function(e,n){},279:function(e,n){},281:function(e,n){},288:function(e,n){},307:function(e,n){},346:function(e,n){},453:function(e,n,t){"use strict";t.r(n);var r,i=t(11),c=t.n(i),o=t(204),u=t.n(o),a=(t(218),t(33)),s=t(458),f=t(8),l=t.n(f),d=t(26),h=t(205),g=function(e){return function(){var n=Object(d.a)(l.a.mark((function n(t){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,new Promise((function(e){return setTimeout(e,200)}));case 3:return n.next=5,e(t);case 5:return r=n.sent,n.abrupt("return",r);case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},p=function(){var e=Object(d.a)(l.a.mark((function e(n){var t,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(h.client)(n),e.next=3,r.me().infoAsync();case 3:return t=e.sent,i=Object(a.a)(t,1),c=i[0],e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(e){var n=r.user(e),t=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.infoAsync();case 2:return t=e.sent,r=Object(a.a)(t,1),i=r[0],e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r,i,c,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,e.next=3,n.followersAsync({page:t,per_page:100});case 3:return r=e.sent,i=Object(a.a)(r,1),c=i[0],e.abrupt("return",c.map((function(e){return e.login})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r,i,c,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,e.next=3,n.followingAsync({page:t,per_page:100});case 3:return r=e.sent,i=Object(a.a)(r,1),c=i[0],e.abrupt("return",c.map((function(e){return e.login})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{apiGetInfo:g(t),apiGetFollowers:g(i),apiGetFollowings:g(c)}},v=t(209),j=Object(v.a)(),x=j.getValue,O=j.useValue,w=j.set,F=Object(v.a)({follow:!0,moreThanOne:!0,showFriendFriend:!0,showFriendFriendFriend:!1}),y=F.getValue,k=F.useValue,m=function(e){e.target.checked?F.set((function(e){return{follow:!0,moreThanOne:e.moreThanOne,showFriendFriend:!1,showFriendFriendFriend:!1}})):F.set((function(e){return{follow:!1,moreThanOne:e.moreThanOne,showFriendFriend:!1,showFriendFriendFriend:!1}}))},V=function(e){e.target.checked?F.set((function(e){return{follow:e.follow,moreThanOne:!0,showFriendFriend:!1,showFriendFriendFriend:!1}})):F.set((function(e){return{follow:e.follow,moreThanOne:!1,showFriendFriend:!1,showFriendFriendFriend:!1}}))},_=function(e){F.set((function(n){return{follow:!0,moreThanOne:!0,showFriendFriend:e.target.checked,showFriendFriendFriend:!1}}))},E=function(e){F.set((function(n){return{follow:!0,moreThanOne:!0,showFriendFriend:!0,showFriendFriendFriend:e.target.checked}}))},K=t(75),T=t(45),A=t(46),C=function(){function e(n){if(Object(T.a)(this,e),this.value=void 0,this.info=void 0,this.edges=void 0,void 0===n)throw new Error("Graph vertex must have a value");this.value=n,this.edges=[]}return Object(A.a)(e,[{key:"addEdge",value:function(e){return this.edges.push(e),this}},{key:"deleteEdge",value:function(e){this.edges.splice(this.edges.findIndex((function(n){return n===e})),1)}},{key:"getFollowings",value:function(){return this.edges.map((function(e){return e.endVertex}))}},{key:"getFriends",value:function(){var e=this;return this.getFollowings().filter((function(n){return n.getFollowings().find((function(n){return n===e}))}))}},{key:"getEdges",value:function(){return this.edges}},{key:"getDegree",value:function(){return this.edges.length}},{key:"hasEdge",value:function(e){return!!this.edges.find((function(n){return n===e}))}},{key:"findEdge",value:function(e){var n=this.edges.find((function(n){return n.startVertex===e||n.endVertex===e}));return n||null}},{key:"getKey",value:function(){return this.value}},{key:"deleteAllEdges",value:function(){var e=this;return this.getEdges().forEach((function(n){return e.deleteEdge(n)})),this}},{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),N=function(){function e(n,t){Object(T.a)(this,e),this.startVertex=void 0,this.endVertex=void 0,this.startVertex=n,this.endVertex=t}return Object(A.a)(e,[{key:"getKey",value:function(){var e=this.startVertex.getKey(),n=this.endVertex.getKey();return"".concat(e,"_").concat(n)}},{key:"reverse",value:function(){var e=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=e,this}},{key:"toString",value:function(){return this.getKey()}}]),e}(),B=new(function(){function e(){Object(T.a)(this,e),this.vertices={}}return Object(A.a)(e,[{key:"addVertex",value:function(e){return this.vertices[e.getKey()]=e,this}},{key:"getVertexByKey",value:function(e){return this.vertices[e]}},{key:"getFollowings",value:function(e){return e.getFollowings()}},{key:"getFriends",value:function(e){return e.getFriends()}},{key:"getAllVertices",value:function(){return Object.values(this.vertices)}},{key:"addEdge",value:function(e){var n=this.getVertexByKey(e.startVertex.getKey()),t=this.getVertexByKey(e.endVertex.getKey());return n||(this.addVertex(e.startVertex),n=this.getVertexByKey(e.startVertex.getKey())),t||this.addVertex(e.endVertex),n.addEdge(e),this}},{key:"deleteEdge",value:function(e){this.getVertexByKey(e.startVertex.getKey()).deleteEdge(e)}},{key:"findEdge",value:function(e,n){var t=this.getVertexByKey(e.getKey());return t?t.findEdge(n):null}},{key:"toString",value:function(){return Object.keys(this.vertices).toString()}}]),e}()),I={},S=function(e){return I[e]},G=function(e){I[e]||(I[e]=new C(e))},L={},P=function(e,n){G(e),G(n);var t="".concat(e," ").concat(n);L[t]||(L[t]=new N(S(e),S(n)),B.addEdge(function(e,n){return L["".concat(e," ").concat(n)]}(e,n)))},M=function(e){return B.getFriends(S(e))},D=[],J={current:[[],[]]},R={getCurrentValue:function(){return J.current},subscribe:function(e){return D.push(e),function(){D.splice(D.indexOf(e),1)}}},U=function(){var e=x(),n=y();return e?function(e,n){var t=S(e),r={},i=[],c=[],o=[],u=function(e,n){r[e]=!0;var c=function(){switch(n){case 0:return"me";case 1:return"friend";case 2:return S(e).getFollowings().includes(t)?"friend-friend+follower":"friend-friend";case 3:return S(e).getFollowings().includes(t)?"friend-friend-friend+follower":"friend-friend-friend";default:return"friend-friend-friend"}}();i.push({name:e,category:c})};return u(e,0),function e(t,i){for(var a=S(t).getFriends(),s=0;s<a.length;s++){var f=a[s].getKey();c.push({source:t,target:f}),r[f]||(n.showFriendFriendFriend||2!==i)&&(u(f,i+1),o.push({id:f,depth:i+1}))}var l=o.splice(0,1)[0];l&&e(l.id,l.depth)}(e,0),i.length>1&&(i[0].fixed=!0),[i,c]}(e,n):[[],[]]},W=function(){var e=U(),n=J.current;J.current=e,e[0].length===n[0].length&&e[1].length===n[1].length||D.forEach((function(e){return e()}))},X=[],Y={current:""},q={getCurrentValue:function(){return Y.current},subscribe:function(e){return X.push(e),function(){X.splice(X.indexOf(e),1)}}},z=function(e){var n=Y.current;Y.current=e,n!==e&&X.forEach((function(e){return e()}))},H=t(210),Q=Object(v.a)([]),Z=function(e){Q.set((function(n){return n.includes(e)?n:[].concat(Object(H.a)(n),[e])}))},$=Q.useValue,ee=Promise.resolve(),ne=function(e){var n=function(){return new Promise((function(n){return n(e())}))};ee=ee.then(n,n)},te=function(e,n){S(e)&&(S(e).info=n)},re=function(e,n){n.forEach((function(n){P(e,n)})),W()},ie=function(e,n){n.forEach((function(n){P(n,e)})),W()},ce=function(){var e=Object(d.a)(l.a.mark((function e(n,t){var r,i,c,o,u,a,s,f,d,h,g,p,v,j,x,O;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=b(n),c=i.apiGetInfo,o=i.apiGetFollowings,u=i.apiGetFollowers,!(null===(r=S(n))||void 0===r?void 0:r.info)){e.next=3;break}return e.abrupt("return");case 3:return z("\u52a0\u8f7d ".concat(n,"\uff08\u4f60\u7684 ").concat(t," \u5ea6\u597d\u53cb\uff09\u7684\u4fe1\u606f")),e.next=6,c();case 6:if(a=e.sent,G(n),te(n,a),s="\u52a0\u8f7d ".concat(n,"\uff08\u4f60\u7684 ").concat(t," \u5ea6\u597d\u53cb\uff09\u7684\u597d\u53cb\u5217\u8868"),f=Math.ceil(S(n).info.following/100),!(0===t||f<=100)){e.next=24;break}d=1;case 13:if(!(d<=f)){e.next=22;break}return z("".concat(s,"\uff1afollowings ").concat(d,"/").concat(f)),e.next=17,o(d);case 17:h=e.sent,re(n,h);case 19:d++,e.next=13;break;case 22:e.next=25;break;case 24:Z("\u6ca1\u6709\u52a0\u8f7d ".concat(n," \u7684\u5173\u6ce8\u5217\u8868\uff0c\u5173\u6ce8\u4e86\u592a\u591a\u4eba"));case 25:if(g=Math.ceil(S(n).info.followers/100),!(0===t||g<=10)){e.next=39;break}p=1;case 28:if(!(p<=g)){e.next=37;break}return z("".concat(s,"\uff1afollowers ").concat(p,"/").concat(g)),e.next=32,u(p);case 32:v=e.sent,ie(n,v);case 34:p++,e.next=28;break;case 37:e.next=40;break;case 39:Z("\u6ca1\u6709\u52a0\u8f7d ".concat(n," \u7684\u5173\u6ce8\u8005\u5217\u8868\uff0c\u88ab\u592a\u591a\u4eba\u5173\u6ce8"));case 40:if(t<=1)for(j=M(n),x=function(e){var n=j[e].getKey();ne((function(){return ce(n,t+1)}))},O=0;O<j.length;O++)x(O);case 41:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(d.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(n);case 2:t=e.sent,r=t.login,w(r),ne((function(){return ce(r,0)}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ue=t(208),ae=["me","friend","friend-friend+follower","friend-friend","friend-friend-friend+follower","friend-friend-friend","friend-following+follower"],se=t(207),fe=t.n(se),le=t(2),de=null,he=function(e){var n=e.nodes,t=e.links,r=Object(i.useRef)(null);return Object(i.useLayoutEffect)((function(){r.current&&(de=Object(ue.a)(r.current,{color:["#5470c6","#ee6666","#73c0de","#91cc75","#fac858","#cccccc","#fc8452"]}))}),[]),Object(i.useEffect)((function(){if(de){var e=function(e,n){return{series:[{type:"graph",layout:"force",animation:!1,label:{position:"right",formatter:"{b}"},draggable:!0,data:e,categories:ae.map((function(e){return{name:e}})),force:{edgeLength:50,repulsion:20,gravity:.2},edges:n}]}}(n,t);de.setOption(e)}}),[n,t]),Object(le.jsx)("div",{className:fe.a.container,ref:r})},ge=t(23),pe=t.n(ge),be=Object(s.a)("token",""),ve=be.set,je=be.useValue,xe=function(){var e=Object(K.useSubscription)(R),n=Object(a.a)(e,2),t=n[0],r=n[1];return Object(le.jsx)(he,{nodes:t,links:r})},Oe=function(){var e=Object(i.useState)(""),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(i.useCallback)((function(e){r(e.target.value)}),[]),o=Object(i.useCallback)((function(){ve(t)}),[t]),u=Object(i.useCallback)((function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||o()}),[o]);return Object(le.jsxs)(Fe,{children:[Object(le.jsx)("input",{placeholder:"\u8f93\u5165 token",value:t,onChange:c,onKeyDown:u}),Object(le.jsx)("span",{className:pe.a.button,onClick:o,children:"\u5f00\u59cb"}),Object(le.jsx)("a",{className:pe.a.link,href:"https://github.com/settings/tokens/new",target:"_blank",rel:"noreferrer noopener",children:"?"}),Object(le.jsx)("span",{className:pe.a.tip,children:"\u6b64 token \u4ec5\u7528\u4e8e\u83b7\u53d6\u5f00\u653e\u7684\u7528\u6237\u4fe1\u606f\uff0c\u8bf7\u9009\u62e9 user \u6807\u7b7e\u4ee5\u53ca\u5176\u4e0b\u7684\u9879"})]})},we=function(e){e.id;var n=Object(K.useSubscription)(q);return Object(le.jsx)("div",{className:pe.a.description,children:n})},Fe=function(e){var n=e.className,t=e.children;return Object(le.jsx)("div",{className:n?"".concat(pe.a.line," ").concat(n):pe.a.line,children:t})},ye=function(){var e=k(),n=O(),t=je(),r=$();return Object(i.useEffect)((function(){t&&oe(t)}),[t]),Object(le.jsxs)(le.Fragment,{children:[n&&Object(le.jsx)(xe,{id:n}),Object(le.jsx)("div",{className:pe.a.context,children:n?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Fe,{children:Object(le.jsx)(we,{id:n})}),Object(le.jsxs)(Fe,{children:[Object(le.jsx)("input",{type:"checkbox",id:"follow",disabled:e.showFriendFriend,checked:e.follow,onChange:m}),Object(le.jsx)("label",{htmlFor:"follow",children:"\u663e\u793a\u5173\u6ce8\u6211\u7684\u4e8c\u5ea6\u597d\u53cb"})]}),Object(le.jsxs)(Fe,{children:[Object(le.jsx)("input",{type:"checkbox",id:"moreThanOne",disabled:e.showFriendFriend,checked:e.moreThanOne,onChange:V}),Object(le.jsx)("label",{htmlFor:"moreThanOne",children:"\u663e\u793a\u6709\u4e24\u4e2a\u5171\u540c\u597d\u53cb\u7684\u4e8c\u5ea6\u597d\u53cb"})]}),Object(le.jsxs)(Fe,{children:[Object(le.jsx)("input",{type:"checkbox",id:"all",disabled:e.showFriendFriendFriend,checked:e.showFriendFriend,onChange:_}),Object(le.jsx)("label",{htmlFor:"all",children:"\u663e\u793a\u6240\u6709\u4e8c\u5ea6\u597d\u53cb"})]}),Object(le.jsxs)(Fe,{children:[Object(le.jsx)("input",{type:"checkbox",id:"all",disabled:!e.showFriendFriend,checked:e.showFriendFriendFriend,onChange:E}),Object(le.jsx)("label",{htmlFor:"all",children:"\u663e\u793a\u6240\u6709\u4e09\u5ea6\u597d\u53cb"})]}),r.length>0&&Object(le.jsx)(Fe,{className:pe.a.hoverIcon,children:"?"}),r.map((function(e){return Object(le.jsx)(Fe,{className:pe.a.hoverLine,children:e})}))]}):Object(le.jsx)(Oe,{})})]})},ke=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,459)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),i(e),c(e),o(e)}))};u.a.render(Object(le.jsx)(c.a.StrictMode,{children:Object(le.jsx)(ye,{})}),document.getElementById("root")),ke()}},[[453,1,2]]]);
//# sourceMappingURL=main.cbce9c8e.chunk.js.map